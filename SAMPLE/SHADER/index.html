<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>Sample</title>
        <style>
        </style>
    </head>
    <body>
        <main>
            <canvas id="canvas" width="640" height="480">
            </canvas>
        </main>
    </body>
    <script src="../../CODE/JAVASCRIPT/vista.js"></script>
    <script src="../../CODE/JAVASCRIPT/vista_element.js"></script>
    <script src="../../CODE/JAVASCRIPT/vista_math.js"></script>
    <script src="../../CODE/JAVASCRIPT/vista_shader.js"></script>
    <script id="vertex-shader" type="x-shader/x-vertex">
        attribute vec4 PositionAttribute;
        attribute vec4 ColorAttribute;
        varying vec4 ColorVarying;

        void main()
        {
            gl_Position = PositionAttribute;
            ColorVarying = ColorAttribute;
        }
    </script>
    <script id="fragment-shader" type="x-shader/x-fragment">
        precision mediump float;

        varying vec4 ColorVarying;

        void main()
        {
            gl_FragColor = ColorVarying;
        }
    </script>
    <script>
        var
            canvas,
            color_attribute,
            fragment_shader,
            position_attribute,
            program,
            texture_array,
            vertex_position_color_buffer,
            vertex_shader;

        canvas = new CANVAS( GetElementById( "canvas" ) );

        texture_array = [
            canvas.CreateTexture( "texture_1.jpg" ),
            canvas.CreateTexture( "texture_2.jpg" ),
            canvas.CreateTexture( "texture_3.jpg" )
            ];

        vertex_position_color_buffer
            = canvas.CreateReal32Buffer(
                [
                    0.0, 0.5, 1.0, 0.0, 0.0,
                    -0.5, -0.5, 0.0, 1.0, 0.0,
                    0.5, -0.5, 0.0, 0.0, 1.0
                ]
                );

        vertex_shader = canvas.CreateVertexShader( "vertex-shader", GetElementById( "vertex-shader" ).text );
        fragment_shader = canvas.CreateFragmentShader( "fragment-shader", GetElementById( "fragment-shader" ).text );
        program = canvas.CreateProgram( vertex_shader, fragment_shader );
        program.Use();

        position_attribute = program.GetAttribute( "PositionAttribute" );
        position_attribute.EnableReal32Array( 0, 2, 5 );

        color_attribute = program.GetAttribute( "ColorAttribute" );
        color_attribute.EnableReal32Array( 2, 3, 5 );

        canvas.ClearColor( [ 0.9, 0.9, 0.9, 1.0 ] );
        canvas.DrawTriangles( 0, 3 );
    </script>
</html>
