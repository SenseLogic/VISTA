<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Sample</title>
        <link rel="stylesheet" href="style.css" type="text/css">
    </head>
    <body>
        <main>
            <test-element click-count="1">
            </test-element>
            <div class="line">
                <div class="background-red block">
                </div>
            </div>
            <div class="line">
                <div class="background-green block">
                </div>
            </div>
            <div class="line">
                <div class="background-blue block">
                </div>
            </div>
        </main>
        <script src="../../CODE/JAVASCRIPT/vista_base.js"></script>
        <script src="../../CODE/JAVASCRIPT/vista_element.js"></script>
        <script src="../../CODE/JAVASCRIPT/vista_animation.js"></script>
        <script>
            // -- TYPES

            class TEST_ELEMENT extends VISTA_ELEMENT
            {
                // -- INQUIRIES

                static get observedAttributes(
                    )
                {
                    return [ "text-color", "click-count" ];
                }

                // -- OPERATIONS

                ChangeData(
                    )
                {
                    this.SetProperty( "TextColor", "#" + GetByteArrayHexadecimalText( GetRandomByteArray( 3 ) ) );
                    this.SetAttribute( "click-count", this.Data.ClickCount + 1 );
                }

                // ~~

                InitializeElement(
                    )
                {
                    this.Data.MovieArray =
                        [
                            {
                                Name : "<Blade Runner>",
                                Rating : 5
                            },
                            {
                                Name : "<The Chronicles of Riddick>",
                                Rating : 4
                            },
                            {
                                Name : "<The Matrix>",
                                Rating : 3
                            }
                        ];

                    this.BindProperty( this.Data, "TextColor", "text-color", "#0000ff" );
                    this.BindProperty( this.Data, "ClickCount", "click-count", 0 );
                    this.BindMethod( this, "ChangeData" );
                    this.BindShadow();
                    this.BindTemplate(
                        Html`
                        <style>
                            :host #button
                            {
                                border: none;
                                border-radius: 0.5rem;
                                padding: 0.5rem 1rem;
                                background-color: <:# this.Data.TextColor :>;
                                color: white;
                            }
                        </style>
                        <button id="button">
                            <:# this.Data.TextColor :> : <:# this.Data.ClickCount :>
                        </button>
                        <ul>
                            <: for ( var movie of this.Data.MovieArray ) { :>
                                <li style="color:<:# this.Data.TextColor :>">
                                    <:% movie.Name :> : <:# movie.Rating :>
                                </li>
                            <: } :>
                        </ul>
                        `
                        );
                }

                // ~~

                UpdateElement(
                    )
                {
                    super.UpdateElement();

                    this.BindEvent( this.RootElement.GetElement( "#button" ), "click", this.ChangeData );
                }
            }

            // -- STATEMENTS

            DefineElement( TEST_ELEMENT, "test-element" );

            GetElements( ".line" )
                .SetProperties(
                    {
                        "margin-top" : "2vw",
                        "width" : "100%",
                        "height" : "5vw",
                        "background-color" : "#EEE"
                    }
                    );

            GetElements( ".block" )
                .SetProperties(
                    {
                        "width" : "5vw",
                        "height" : "5vw"
                    }
                    )
                .AnimateProperties(
                    {
                        "transform" : [ "translateX(0vw)", "translateX(30vw)", "translateX(70vw)", "translateX(90vw)" ],
                        "opacity" : [ "1.0", "0.5", "0.1", "1.0" ]
                    },
                    [ 0.0, 2.0, 4.0, 6.0 ]
                    );
        </script>
    </body>
</html>
