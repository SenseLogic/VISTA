<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Sample</title>
    </head>
    <body>
        <script src="../../CODE/JAVASCRIPT/vista_base.js"></script>
        <script src="../../CODE/JAVASCRIPT/vista_component.js"></script>
        <script src="../../CODE/JAVASCRIPT/vista_request.js"></script>
        <script src="../../CODE/JAVASCRIPT/vista_table.js"></script>
        <script>
            // -- TYPES

            class USER extends VISTA_DATA
            {
                // -- CONSTRUCTORS

                constructor(
                    )
                {
                    super();
                }
            }

            // ~~

            class USER_TABLE extends VISTA_TABLE
            {
                // -- CONSTRUCTORS

                constructor(
                    )
                {
                    super(
                        USER,
                        "id",
                        [ "id", "email", "first_name", "last_name", "avatar" ],
                        "https://reqres.in/api/users"
                        );

                    this.GetValueArrayPropertyName = "data";
                    this.GetValuePropertyName = "data";
                    this.DefineInterface( "User" );
                }
            }

            // -- FUNCTIONS

            async function Test(
                )
            {
                var
                    user,
                    user_array,
                    user_table;

                user_table = new USER_TABLE();
                user_array = await user_table.GetUserArray( "?page=1" );

                for ( user of user_array )
                {
                    WriteLine( "GET " + GetJsonText( user ) );
                }

                user = await user_table.GetUser( 2 );
                WriteLine( "GET " + GetJsonText( user ) );

                user.email = "janet.weaver@yahoo.com";
                user = await user_table.SetUser( user );
                WriteLine( "PUT " + GetJsonText( user ) );

                user = await user_table.FixUser( { email : "janet.weaver@gmail.com" } );
                WriteLine( "PATCH " + GetJsonText( user ) );

                user = await user_table.AddUser(
                    {
                        email : "rick.deckard@live.com",
                        first_name : "Rick",
                        last_name : "Deckard",
                        avatar : "https://s3.amazonaws.com/uifaces/faces/twitter/rickdeckard/128.jpg",
                    }
                    );
                WriteLine( "POST " + GetJsonText( user ) );

                user = await user_table.RemoveUser( 2 );
                WriteLine( "DELETE " + GetJsonText( user ) );
            }

            // -- STATEMENTS

            Test();
        </script>
    </body>
</html>
