<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Sample</title>
    </head>
    <body>
        <script src="../../CODE/JAVASCRIPT/vista_base.js"></script>
        <script src="../../CODE/JAVASCRIPT/vista_component.js"></script>
        <script src="../../CODE/JAVASCRIPT/vista_request.js"></script>
        <script src="../../CODE/JAVASCRIPT/vista_table.js"></script>
        <script>
            // -- TYPES

            class USER extends VISTA_DATA
            {
                // -- CONSTRUCTORS

                constructor(
                    )
                {
                    super();
                }
            }

            // ~~

            class USER_TABLE extends VISTA_TABLE
            {
                // -- CONSTRUCTORS

                constructor(
                    )
                {
                    super(
                        USER,
                        "id",
                        [ "id", "email", "first_name", "last_name", "avatar" ],
                        "https://reqres.in/api/users"
                        );

                    this.GetValueArrayPropertyName = "data";
                    this.GetValuePropertyName = "data";
                }
            }

            // -- FUNCTIONS

            function PrintResponse(
                prefix,
                object
                )
            {
                document.write( "<pre>" + prefix + " " + GetJsonText( object ) + "</pre>" );
            }

            // ~~

            async function Test(
                )
            {
                var
                    user,
                    user_array,
                    user_table;

                user_table = new USER_TABLE();
                user_array = await user_table.GetValueArray( "?page=1" );

                for ( user of user_array )
                {
                    PrintResponse( "GET", user );
                }

                user = await user_table.GetValue( 2 );
                PrintResponse( "GET", user );

                user.email = "janet.weaver@yahoo.com";
                user = await user_table.SetValue( user );
                PrintResponse( "PUT", user );

                user = await user_table.FixValue( { email : "janet.weaver@gmail.com" } );
                PrintResponse( "PATCH", user );

                user = await user_table.AddValue(
                    {
                        email : "rick.deckard@live.com",
                        first_name : "Rick",
                        last_name : "Deckard",
                        avatar : "https://s3.amazonaws.com/uifaces/faces/twitter/rickdeckard/128.jpg",
                    }
                    );
                PrintResponse( "POST", user );

                user = await user_table.RemoveValue( 2 );
                PrintResponse( "DELETE", user );
            }

            // -- STATEMENTS

            Test();
        </script>
    </body>
</html>
